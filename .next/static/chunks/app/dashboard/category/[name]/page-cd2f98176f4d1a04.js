(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{39213:function(e,t,s){Promise.resolve().then(s.bind(s,71237)),Promise.resolve().then(s.bind(s,56453))},71237:function(e,t,s){"use strict";s.d(t,{CategoryPageContent:function(){return M}});var r=s(57437),a=s(16593),n=s(27624),l=s(74266),i=s(99376),o=s(2265),d=s(86574),c=s(33968);let u=e=>{let{categoryName:t}=e,s=(0,i.useRouter)(),{data:u}=(0,a.a)({queryKey:["category",t,"hasEvents"],queryFn:async()=>{let e=await n.L.category.pollCategory.$get({name:t});return await e.json()},refetchInterval(e){var t;return(null===(t=e.state.data)||void 0===t||!t.hasEvents)&&1e3}}),x=null==u?void 0:u.hasEvents,f="await fetch('https://localhost:3000/api/events', {\n  method: 'POST',\n  headers: {\n    'Authorization': 'Bearer YOUR_API_KEY'\n  },\n  body: JSON.stringify({\n    category: '".concat(t,"',\n    fields: {\n      field1: 'value1', // for example: user id\n      field2: 'value2' // for example: user email\n    }\n  })\n})");return(0,o.useEffect)(()=>{x&&s.refresh},[x,s]),(0,r.jsxs)(l.Z,{contentClassName:"max-w-2xl flex flex-col items-center p-6",className:"flex-1 flex items-center justify-center",children:[(0,r.jsxs)("h2",{className:"text-xl/8 font-medium text-center tracking-tight text-gray-950",children:["Create your first ",t," event"]}),(0,r.jsx)("p",{className:"text-sm/6 text-gray-600 mb-8 max-w-md text-center text-pretty",children:"Get started by sending a request to our tracking API"}),(0,r.jsxs)("div",{className:"w-full max-w-3xl bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gray-800 px-4 py-2 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("div",{className:"size-3 rounded-full bg-red-500"}),(0,r.jsx)("div",{className:"size-3 rounded-full bg-yellow-500"}),(0,r.jsx)("div",{className:"size-3 rounded-full bg-green-500"})]}),(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"your-first-event.js"})]}),(0,r.jsx)(d.Z,{language:"javascript",style:c.Z,customStyle:{borderRadius:"0px",margin:0,padding:"1rem",fontSize:"0.875rem",lineHeight:"1.5"},children:f})]}),(0,r.jsxs)("div",{className:"mt-8 flex flex-col items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center ",children:[(0,r.jsx)("div",{className:"size-2 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Listening to incoming events..."})]}),(0,r.jsxs)("p",{className:"text-sm/6 text-gray-600 mt-2",children:["Need help? Check out our"," ",(0,r.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"documentation"})," ","or"," ",(0,r.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"contact support"})]})]})]})};var x=s(32449),f=s(90855);let m=x.fC,g=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(x.aV,{ref:t,className:(0,f.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a})});g.displayName=x.aV.displayName;let h=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(x.xz,{ref:t,className:(0,f.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a})});h.displayName=x.xz.displayName;let v=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(x.VY,{ref:t,className:(0,f.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});v.displayName=x.VY.displayName;var p=s(28842),y=s(20464),b=s(646),j=s(56739),N=s(16662),w=s(87837),k=s(71594),C=s(24525),z=s(12381),S=s(22598),R=s(42051);let E=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,f.cn)("w-full caption-bottom text-sm",s),...a})})});E.displayName="Table";let P=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,f.cn)("[&_tr]:border-b",s),...a})});P.displayName="TableHeader";let T=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,f.cn)("[&_tr:last-child]:border-0",s),...a})});T.displayName="TableBody",o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,f.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let O=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,f.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});O.displayName="TableRow";let A=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,f.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});A.displayName="TableHead";let I=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,f.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});I.displayName="TableCell",o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,f.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption";let M=e=>{let{hasEvents:t,category:s}=e,d=(0,i.useSearchParams)(),[c,x]=(0,o.useState)("today"),f=parseInt(d.get("page")||"1",10),M=parseInt(d.get("limit")||"30",10),[_,V]=(0,o.useState)({pageIndex:f-1,pageSize:M}),{data:Z}=(0,a.a)({queryKey:["category",s.name,"hasEvents"],initialData:{hasEvents:t}}),{data:D,isFetching:F}=(0,a.a)({queryKey:["events",s.name,_.pageIndex,_.pageSize,c],queryFn:async()=>{let e=await n.L.category.getEventsByCategoryName.$get({name:s.name,page:_.pageIndex+1,limit:_.pageSize,timeRange:c});return await e.json()},refetchOnWindowFocus:!1,enabled:Z.hasEvents}),L=(0,o.useMemo)(()=>[{accessorKey:"category",header:"Category",cell:()=>(0,r.jsx)("span",{children:s.name||"Uncategorized"})},{accessorKey:"createdAt",header:e=>{let{column:t}=e;return(0,r.jsxs)(z.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Date",(0,r.jsx)(p.Z,{className:"ml-2 size-4"})]})},cell:e=>{let{row:t}=e;return new Date(t.getValue("createdAt")).toLocaleString()}},...(null==D?void 0:D.events[0])?Object.keys(D.events[0].fields).map(e=>({accessorFn:t=>t.fields[e],header:e,cell:t=>{let{row:s}=t;return s.original.fields[e]||"-"}})):[],{accessorKey:"deliveryStatus",header:"Delivery Status",cell:e=>{let{row:t}=e;return(0,r.jsx)("span",{className:(0,S.cn)("px-2 py-1 rounded-full text-xs font-semibold",{"bg-green-100 text-green-800":"DELIVERED"===t.getValue("deliveryStatus"),"bg-red-100 text-red-800":"FAILED"===t.getValue("deliveryStatus"),"bg-yellow-100 text-yellow-800":"PENDING"===t.getValue("deliveryStatus")}),children:t.getValue("deliveryStatus")})}}],[s.name,null==D?void 0:D.events]),[q,K]=(0,o.useState)([]),[W,B]=(0,o.useState)([]),G=(0,k.b7)({data:(null==D?void 0:D.events)||[],columns:L,getCoreRowModel:(0,C.sC)(),onSortingChange:K,getSortedRowModel:(0,C.tj)(),onColumnFiltersChange:B,getFilteredRowModel:(0,C.vL)(),getPaginationRowModel:(0,C.G_)(),manualPagination:!0,pageCount:Math.ceil(((null==D?void 0:D.eventsCount)||0)/_.pageSize),onPaginationChange:V,state:{sorting:q,columnFilters:W,pagination:_}}),H=(0,i.useRouter)();(0,o.useEffect)(()=>{let e=new URLSearchParams(window.location.search);e.set("page",(_.pageIndex+1).toString()),e.set("limit",_.pageSize.toString()),H.push("?".concat(e.toString()),{scroll:!1})},[_,H]);let J=(0,o.useMemo)(()=>{if(!(null==D?void 0:D.events)||0===D.events.length)return{};let e={},t=new Date,s=(0,b.z)(t,{weekStartsOn:0}),r=(0,j.N)(t);return D.events.forEach(t=>{let a=t.createdAt;Object.entries(t.fields).forEach(t=>{let[n,l]=t;"number"==typeof l&&(e[n]||(e[n]={total:0,thisWeek:0,thisMonth:0,today:0}),e[n].total+=l,((0,N.A)(a,s)||a.getTime()===s.getTime())&&(e[n].thisWeek+=l),((0,N.A)(a,r)||a.getTime()===r.getTime())&&(e[n].thisMonth+=l),(0,w.z)(a)&&(e[n].today+=l))})}),e},[null==D?void 0:D.events]);return Z.hasEvents?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(m,{value:c,onValueChange:e=>{x(e)},children:[(0,r.jsxs)(g,{className:"mb-2",children:[(0,r.jsx)(h,{value:"today",children:"Today"}),(0,r.jsx)(h,{value:"week",children:"This Week"}),(0,r.jsx)(h,{value:"month",children:"This Month"})]}),(0,r.jsx)(v,{value:c,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-16",children:[(0,r.jsxs)(l.Z,{className:"border-2 border-brand-700",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)("p",{className:"text-sm/6 font-medium",children:"Total Events"}),(0,r.jsx)(y.Z,{className:"size-4 text-muted-foreground"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:(null==D?void 0:D.eventsCount)||0}),(0,r.jsxs)("p",{className:"text-xs/5 text-muted-foreground",children:["Events"," ","today"===c?"today":"week"===c?"this week":"this month"]})]})]}),(0,r.jsx)(()=>0===Object.keys(J).length?null:Object.entries(J).map(e=>{let[t,s]=e,a="today"===c?s.today:"week"===c?s.thisWeek:s.thisMonth;return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)("p",{className:"text-sm/6 font-medium",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,r.jsx)(y.Z,{className:"size-4 text-muted-foreground"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:a.toFixed(2)}),(0,r.jsx)("p",{className:"text-xs/5 text-muted-foreground",children:"today"===c?"today":"week"===c?"this week":"this month"})]})]},t)}),{})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("div",{className:"w-full flex flex-col gap-4",children:(0,r.jsx)(R.X,{className:"text-3xl",children:"Event overview"})})}),(0,r.jsx)(l.Z,{contentClassName:"px-6 py-4",children:(0,r.jsxs)(E,{children:[(0,r.jsx)(P,{children:G.getHeaderGroups().map(e=>(0,r.jsx)(O,{children:e.headers.map(e=>(0,r.jsx)(A,{children:e.isPlaceholder?null:(0,k.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(T,{children:F?[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(O,{children:L.map((e,t)=>(0,r.jsx)(I,{children:(0,r.jsx)("div",{className:"h-4 w-full bg-gray-200 animate-pulse rounded"})},t))},t)):G.getRowModel().rows.length?G.getRowModel().rows.map(e=>(0,r.jsx)(O,{children:e.getVisibleCells().map(e=>(0,r.jsx)(I,{children:(0,k.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(O,{children:(0,r.jsx)(I,{colSpan:L.length,className:"h-24 text-center",children:"No results."})})})]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,r.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>G.previousPage(),disabled:!G.getCanPreviousPage()||F,children:"Previous"}),(0,r.jsx)(z.z,{variant:"outline",size:"sm",onClick:()=>G.nextPage(),disabled:!G.getCanNextPage()||F,children:"Next"})]})]}):(0,r.jsx)(u,{categoryName:s.name})}},27624:function(e,t,s){"use strict";s.d(t,{L:function(){return d}});var r=s(57348),a=s(6594),n=s(48080);s(40257);let l=(0,r.hc)("",{fetch:async(e,t)=>{let s=await fetch(e,{...t,cache:"no-store"});if(!s.ok)throw new a.M(s.status,{message:s.statusText,res:s});let r=s.headers.get("Content-Type");return s.json=async()=>{let e=await s.text();if("application/superjson"===r)return n.ZP.parse(e);try{return JSON.parse(e)}catch(e){throw console.error("Failed to parse response as JSON:",e),Error("Invalid JSON response")}},s}}).api;function i(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];let a=e;for(let e of s)a=a[e];return a}function o(e){return"object"!=typeof e||null===e?e:Object.fromEntries(Object.entries(e).map(e=>{let[t,s]=e;return[t,n.ZP.stringify(s)]}))}let d=function e(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Proxy(t,{get(t,r,a){if("string"==typeof r){let a=[...s,r];return"$get"===r?async function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return i(l,...a)({query:o(t[0])})}:"$post"===r?async function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return i(l,...a)({json:o(t[0])})}:e(t[r],a)}return Reflect.get(t,r,a)}})}(l)},90855:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},74266:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(57437),a=s(22598);let n=e=>{let{className:t,contentClassName:s,children:n,...l}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("relative rounded-lg bg-gray-50 text-card-foreground",t),...l,children:[(0,r.jsx)("div",{className:(0,a.cn)("relative z-10 p-6",s),children:n}),(0,r.jsx)("div",{className:"absolute z-0 inset-px rounded-lg bg-white"}),(0,r.jsx)("div",{className:"pointer-events-none z-0 absolute inset-px rounded-lg shadow-sm ring-1 ring-black/5"})]})}},56453:function(e,t,s){"use strict";s.d(t,{DashboardPage:function(){return o}});var r=s(57437),a=s(12381),n=s(32660),l=s(42051),i=s(99376);let o=e=>{let{title:t,children:s,cta:o,hideBackButton:d}=e,c=(0,i.useRouter)();return(0,r.jsxs)("section",{className:"flex-1 h-full w-full flex flex-col",children:[(0,r.jsx)("div",{className:"w-full p-6 sm:p-8 flex justify-between border-b border-gray-200",children:(0,r.jsxs)("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-8",children:[d?null:(0,r.jsx)(a.z,{onClick:()=>c.push("/dashboard"),className:"w-fit bg-white",variant:"outline",children:(0,r.jsx)(n.Z,{className:"size-4"})}),(0,r.jsx)(l.X,{children:t})]}),o?(0,r.jsx)("div",{className:"w-full",children:o}):null]})}),(0,r.jsx)("div",{className:"flex-1 p-6 sm:p-8 flex flex-col overflow-y-auto",children:s})]})}},42051:function(e,t,s){"use strict";s.d(t,{X:function(){return n}});var r=s(57437),a=s(22598);let n=e=>{let{children:t,className:s,...n}=e;return(0,r.jsx)("h1",{className:(0,a.cn)("text-4xl sm:text-5xl text-pretty font-heading font-semibold tracking-tight text-zinc-800",s),...n,children:t})}},12381:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return d}});var r=s(57437),a=s(2265),n=s(37053),l=s(90535),i=s(22598);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-brand-700 text-primary-foreground shadow hover:bg-brand-800",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 px-4 py-2",sm:"h-10 rounded-md px-3 text-xs",lg:"h-11 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:t,...c})});d.displayName="Button"},22598:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[137,50,411,393,557,971,117,744],function(){return e(e.s=39213)}),_N_E=e.O()}]);